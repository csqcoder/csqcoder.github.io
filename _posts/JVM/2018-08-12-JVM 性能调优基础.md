---
layout: post
title: JVM 性能调优基础
categories: JVM
description: JVM 性能调优基础
keywords: JVM 性能调优基础
---
# JVM 性能调优基础

## 前言
本文章，只对自己总结，沉淀和自己的一些思考。

## 目录
* Java 内存区域分布
* 常用的垃圾收集器
* 虚拟机性能监控工具
* JVM 常用参数总结
* 本次调优案例

### 三. 虚拟机性能监控工具
#### 1. jps 虚拟机进程状况工具
作用：显示当前系统内所有的 HotSpot 虚拟机进程

命令：

```
jps [ option ] [hostid]
```

参数：

```
-q: 只输出本地虚拟机进程号
-m: 输出虚拟机进程启动时传递给主类 main() 函数的参数
-l: 输出主类的全名，如果是 Jar 包，输出 Jar 路径
-v: 输出虚拟机进程启动时 JVM 参数
```

#### 2. jstat 虚拟机统计信息监视工具

命令：

```
jstat [ option  vmid [interval[s|ms] [count]]]
```
vmid: 虚拟进程
interval: 查询间隔
count: 查询次数

参数:

```
-class: 监视类装载，拆卸数量，总空间，以及类装载所耗费的时间
-gc:监视 Java 堆状况，包括 Eden 区，两个 survivor 区，老年代，元空间，类压缩，容量 及使用。
-gccapacity: 
```

例如:

```
sudo jstat -class 4617 200 5
Loaded  Bytes  Unloaded  Bytes     Time   
 11548 22622.3        0     0.0      40.30
 11548 22622.3        0     0.0      40.30
 11548 22622.3        0     0.0      40.30
 11548 22622.3        0     0.0      40.30
 11548 22622.3        0     0.0      40.30
 
Loaded: 类加载数量
Bytes: 类加载千字节，单位 Kbytes （千字节）  
Unloaded: 类拆卸数量
Bytes: 类拆卸空间 单位 Kbytes （千字节）  
Time: 类加载和拆卸总耗时
```

```
sudo jstat -gc 4617 200 5
S0C      S1C     S0U   S1U      EC       EU        OC         OU       MC       MU    CCSC   CCSU     YGC    YGCT    FGC      FGCT     GCT   
78592.0 78592.0  0.0   473.7  629248.0 484665.6  262144.0   58403.2   72832.0 71702.8 8320.0 8001.4   8267  188.218   0      0.000  188.218
78592.0 78592.0  0.0   473.7  629248.0 495342.2  262144.0   58403.2   72832.0 71702.8 8320.0 8001.4   8267  188.218   0      0.000  188.218
78592.0 78592.0  0.0   473.7  629248.0 511233.5  262144.0   58403.2   72832.0 71702.8 8320.0 8001.4   8267  188.218   0      0.000  188.218
78592.0 78592.0  0.0   473.7  629248.0 524319.6  262144.0   58403.2   72832.0 71702.8 8320.0 8001.4   8267  188.218   0      0.000  188.218
78592.0 78592.0  0.0   473.7  629248.0 540289.0  262144.0   58403.2   72832.0 71702.8 8320.0 8001.4   8267  188.218   0      0.000  188.218

S0C: 当前 survivor 0 区的容量 （KB）
S1C: 当前 survivor 1 区的容量 （KB）
S0U: survivor 0 使用大小 （KB）
S1U: survivor 1 使用大小 （KB）
EC: 当前 eden 区的容量 （KB）
EU: eden 使用大小（KB）
OC: 当前老年代空间容量（KB）
OU: 当前老年代使用大小（KB）
MC: Metaspace 容量 （KB）
MU: Metaspace 使用（KB）
CCSC: 被压缩类的容量（KB）
CCSU: 被压缩类的使用大小（KB）
YGC: 年轻代垃圾收集次数
YGCT: 年轻代垃圾收集时间
FGC: Full GC 的次数
FGCT: Full GC 的时间
GCT: 整个垃圾收集的时间
```

#### jinfo Java 信息配置工具
在 JDK 8 中的解释是：

```
Generates configuration information. This command is experimental and unsupported.
```
这个命令是是线性的，不受支持。



参考资料:

[JDK Tools](https://docs.oracle.com/javase/8/docs/technotes/tools/index.html)